<?phpif (!defined('BASEPATH'))    exit('No direct script access allowed');class Notification extends CI_Controller {    function __construct() {        parent::__construct();        $this->load->helper(array('form', 'url'));        $this->load->library('form_validation');        $this->load->library('security');        $this->load->library('tank_auth');        $this->lang->load('tank_auth');        if (!$this->tank_auth->is_logged_in()) {         // logged in            redirect('auth/');        }    }    public function index() {        $this->lang->load('tank_auth');        $email = $this->tank_auth->get_user_email();        $SQLComm = "SELECT role from users WHERE email = '" . $email . "' ";        $transaction = $this->db->query($SQLComm);        foreach ($transaction->result() as $trans) {            $var_role = $trans->role;        }        if ($var_role == "teacher"): {                $data['main_menu'] = 'dashboard/menu/main_ menu_teacher1';                $data['user_profile'] = 'dashboard/notification/user_profile_teacher';                $data['main_content'] = 'dashboard/notification/notification';                $data['content_right'] = '';                $data['username'] = $this->tank_auth->get_username();                $data['userid'] = $this->tank_auth->get_user_id();                $data['user_email'] = $this->tank_auth->get_user_email();                $this->load->model('notification_model');                $data['notifications'] = $this->notification_model->get_UnReadNotification($email);                $this->load->view('dashboardTemplate1', $data);            }        else: {                $data['main_menu'] = 'dashboard/menu/main_ menu_student';                $data['user_profile'] = 'dashboard/notification/user_profile_student';                $data['main_content'] = 'dashboard/notification/notification';                $data['content_right'] = '';                $data['username'] = $this->tank_auth->get_username();                $data['userid'] = $this->tank_auth->get_user_id();                $data['user_email'] = $this->tank_auth->get_user_email();                $this->load->model('notification_model');                $data['notifications'] = $this->notification_model->get_UnReadNotification($email);                $this->load->view('dashboardTemplate1', $data);            }        endif;    }    public function insert_notification($email, $notification) {        $data = array(            "Email" => $email,            "Notification" => $notification,            "Status" => "Un-Read",        );        $this->load->model('notification_model');        $this->notification_model->insert_entry($data);    }    public function update_notification() {        $email = $this->input->POST('email');        $notification = $this->input->POST('notification');        $datetime = $this->input->POST('datetime');        $data = array(            "Email" => $email,            "Notification" => $notification,            "DateTime" => $datetime,            "Status" => "Read",        );        $this->load->model('notification_model');        $this->notification_model->update_entry($data, $email, $notification, $datetime);    }    public function show_notification() {        $this->load->model('notification_model');        $this->notification_model->insert_entry($data);    }    function convert_to_gmt($time = '', $timezone = 'UTC', $dst = FALSE) {        if ($time == '') {            return now();        }        $time -= timezones($timezone) * 3600;        if ($dst == TRUE) {            $time -= 3600;        }        return $time;    }}